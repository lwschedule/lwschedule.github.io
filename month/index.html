<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Monthly Calendar - LW Schedule</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/assets/style.css">
  <link rel="icon" type="image/png" href="/images/logo.png">
  <link rel="apple-touch-icon" href="/images/logo.png">
  <style>
    .calendar-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 20px 0;
      padding: 15px;
      background: var(--card-dark);
      border-radius: 12px;
    }
    .calendar-nav button {
      background: var(--primary-light);
      color: var(--text-on-primary);
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 700;
      transition: all 0.3s;
    }
    .calendar-nav button:hover:not(:disabled) {
      background: var(--primary);
      transform: scale(1.05);
    }
    .calendar-nav button:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }
    .calendar-nav h3 {
      margin: 0;
      font-size: 1.3em;
    }
    .calendar {
      background: #1f1f1f;
      border-radius: 12px;
      padding: 15px;
      overflow-x: auto;
      max-width: 900px;
      margin: 0 auto;
    }
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 8px;
      min-width: 600px;
    }
    .calendar-day-header {
      text-align: center;
      font-weight: 700;
      padding: 10px 5px;
      color: var(--primary-light);
      font-size: 0.9em;
    }
    .calendar-day {
      aspect-ratio: 1;
      border: 2px solid #333;
      border-radius: 8px;
      padding: 5px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      min-height: 70px;
      background: var(--card-dark);
      transition: all 0.2s;
      cursor: pointer;
    }
    .calendar-day:hover {
      background: #2a2a2a;
      transform: scale(1.02);
    }
    .calendar-day.today {
      border: 3px solid var(--primary-light);
      box-shadow: var(--glow);
    }
    .calendar-day.other-month {
      opacity: 0.3;
    }
    .calendar-day.holiday {
      background: #7a0000;
      border-color: #aa0000;
    }
    .calendar-day.half-day {
      background: #8a5700;
      border-color: #ba7700;
    }
    .day-number {
      font-weight: 700;
      font-size: 0.95em;
    }
    .day-schedule {
      font-size: 0.75em;
      opacity: 0.9;
      text-align: center;
      margin-top: auto;
    }
    @media (max-width: 600px) {
      .calendar-grid {
        min-width: 300px;
      }
      .calendar-day {
        min-height: 50px;
        padding: 3px;
      }
      .day-number {
        font-size: 0.8em;
      }
      .day-schedule {
        font-size: 0.6em;
      }
    }
  </style>
</head>
<body class="theme-purple">
  <a href="/" class="backBtn">← Back</a>
  <div class="pageContainer">
    <h2>Monthly Calendar</h2>
    <div class="calendar-nav">
      <button id="prevMonth">← Previous</button>
      <h3 id="currentMonthYear"></h3>
      <button id="nextMonth">Next →</button>
    </div>
    <div class="calendar">
      <div class="calendar-grid" id="calendarGrid"></div>
    </div>
  </div>
  <script src="/assets/script.js"></script>
  <script>
    let currentMonth = new Date().getMonth();
    let currentYear = new Date().getFullYear();
    const schoolYearStart = new Date(2025, 10, 1);
    const schoolYearEnd = new Date(2026, 5, 30);
    
    if (currentMonth < 10 && currentYear === 2025) {
      currentMonth = 10;
    }
    
    function renderCalendar() {
      const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
      document.getElementById('currentMonthYear').textContent = `${monthNames[currentMonth]} ${currentYear}`;
      
      const prevBtn = document.getElementById('prevMonth');
      const nextBtn = document.getElementById('nextMonth');
      
      const isBeforeNov2025 = (currentYear === 2025 && currentMonth < 10) || currentYear < 2025;
      const isAfterJune2026 = (currentYear === 2026 && currentMonth > 5) || currentYear > 2026;
      
      prevBtn.disabled = (currentYear === 2025 && currentMonth === 10);
      nextBtn.disabled = (currentYear === 2026 && currentMonth === 5);
      
      const grid = document.getElementById('calendarGrid');
      grid.innerHTML = '';
      
      ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].forEach(day => {
        const header = document.createElement('div');
        header.className = 'calendar-day-header';
        header.textContent = day;
        grid.appendChild(header);
      });
      
      const firstDay = new Date(currentYear, currentMonth, 1).getDay();
      const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
      const daysInPrevMonth = new Date(currentYear, currentMonth, 0).getDate();
      
      for (let i = firstDay - 1; i >= 0; i--) {
        const day = daysInPrevMonth - i;
        const cell = createDayCell(day, true, currentMonth - 1, currentYear);
        grid.appendChild(cell);
      }
      
      const today = new Date();
      for (let day = 1; day <= daysInMonth; day++) {
        const isToday = day === today.getDate() && currentMonth === today.getMonth() && currentYear === today.getFullYear();
        const cell = createDayCell(day, false, currentMonth, currentYear, isToday);
        grid.appendChild(cell);
      }
      
      const totalCells = firstDay + daysInMonth;
      const remainingCells = 7 - (totalCells % 7);
      if (remainingCells < 7) {
        for (let day = 1; day <= remainingCells; day++) {
          const cell = createDayCell(day, true, currentMonth + 1, currentYear);
          grid.appendChild(cell);
        }
      }
    }
    
    function createDayCell(day, otherMonth, month, year, isToday = false) {
      const cell = document.createElement('div');
      cell.className = 'calendar-day';
      if (otherMonth) cell.classList.add('other-month');
      if (isToday) cell.classList.add('today');
      
      const date = new Date(year, month, day);
      const dayName = date.toLocaleDateString('en-US', { weekday: 'long' });
      
      const dayNumber = document.createElement('div');
      dayNumber.className = 'day-number';
      dayNumber.textContent = day;
      
      const daySchedule = document.createElement('div');
      daySchedule.className = 'day-schedule';
      
      if (dayName === 'Saturday' || dayName === 'Sunday') {
        daySchedule.textContent = '';
        cell.classList.add('holiday');
      } else {
        const holidayName = getHolidayForDate(date);
        if (holidayName) {
          daySchedule.textContent = '';
          cell.classList.add('holiday');
        } else {
          const schedules = getSchedules(date);
          const schedule = schedules[dayName];
          if (schedule && schedule.length > 0) {
            const summary = getScheduleSummary(schedules, dayName);
            daySchedule.textContent = summary;
            
            if (isThanksgivingWeek(date)) {
              cell.classList.add('half-day');
            }
          } else {
            daySchedule.textContent = '';
            cell.classList.add('holiday');
          }
        }
      }
      
      cell.appendChild(dayNumber);
      cell.appendChild(daySchedule);
      return cell;
    }
    
    function isThanksgivingWeek(date) {
      const year = date.getFullYear();
      const month = date.getMonth();
      const day = date.getDate();
      return year === 2025 && month === 10 && day >= 24 && day <= 26;
    }
    
    document.getElementById('prevMonth').addEventListener('click', () => {
      currentMonth--;
      if (currentMonth < 0) {
        currentMonth = 11;
        currentYear--;
      }
      if (currentYear < 2025 || (currentYear === 2025 && currentMonth < 10)) {
        currentMonth = 10;
        currentYear = 2025;
      }
      renderCalendar();
    });
    
    document.getElementById('nextMonth').addEventListener('click', () => {
      currentMonth++;
      if (currentMonth > 11) {
        currentMonth = 0;
        currentYear++;
      }
      if (currentYear > 2026 || (currentYear === 2026 && currentMonth > 5)) {
        currentMonth = 5;
        currentYear = 2026;
      }
      renderCalendar();
    });
    
    renderCalendar();
  </script>
</body>
</html>