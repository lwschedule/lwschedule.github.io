<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Today's Schedule - LW Schedule</title>
  <link rel="stylesheet" href="/common.css">
  <script src="/common.js"></script>

</head>
<body>
  <a href="/" class="backBtn">‚Üê Back</a>
  <div class="pageContainer">
    <h2>Today's Schedule</h2>
    <div id="todayContent">
      <p>Loading schedule...</p>
    </div>
  </div>
  <script>
function minutesNow() {
const d = new Date();
return d.getHours()*60 + d.getMinutes();
}
function renderScheduleTable(schedule, now, showDuration = false) {
if (!schedule || schedule.length === 0) {
return `<div class="noSchoolMessage"><h3>No School</h3><p>Enjoy your day!</p></div>`;
}
let html = "<table class='scheduleTable'><thead><tr><th>Period</th><th>Start</th><th>End</th>";
if (showDuration) html += "<th>Duration</th>";
html += "</tr></thead><tbody>";
for (let i = 0; i < schedule.length; i++) {
const p = schedule[i];
const duration = p.end - p.start;
const active = now !== null && now >= p.start && now < p.end;
html += `<tr class='${active?"highlight":""}'><td>${p.name}</td><td>${format(p.start)}</td><td>${format(p.end)}</td>`;
if (showDuration) html += `<td>${formatDuration(duration)}</td>`;
html += "</tr>";
}
html += "</tbody></table>";
return html;
}
function updateTodaySchedule() {
const scheduleEl = document.getElementById('todayContent');
if (!scheduleEl) return;
const schedules = getSchedules(new Date());
const today = schedules[currentDayName()];
scheduleEl.innerHTML = renderScheduleTable(today, minutesNow(), true);
}
checkSetupComplete();
loadLunchPreferences();
loadThemeOnPage();
updateTodaySchedule();
setInterval(updateTodaySchedule, 1000);
</script>
</body>
</html>
